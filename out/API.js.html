<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>API.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="API.html">API</a><ul class='methods'><li data-type='method'><a href="API.html#.checkNull">checkNull</a></li><li data-type='method'><a href="API.html#.compareTimestampWithCurrentTime">compareTimestampWithCurrentTime</a></li><li data-type='method'><a href="API.html#.convertFirestoreTimestampToDate">convertFirestoreTimestampToDate</a></li><li data-type='method'><a href="API.html#.deg2rad">deg2rad</a></li><li data-type='method'><a href="API.html#.formatCurrency">formatCurrency</a></li><li data-type='method'><a href="API.html#.getBrightness">getBrightness</a></li><li data-type='method'><a href="API.html#.getCurrentTime">getCurrentTime</a></li><li data-type='method'><a href="API.html#.getDisplayAge">getDisplayAge</a></li><li data-type='method'><a href="API.html#.getDisplayName">getDisplayName</a></li><li data-type='method'><a href="API.html#.getSatuation">getSatuation</a></li><li data-type='method'><a href="API.html#.isAdult">isAdult</a></li><li data-type='method'><a href="API.html#.setData">setData</a></li></ul></li><li><a href="Auth.html">Auth</a><ul class='methods'><li data-type='method'><a href="Auth.html#.logout">logout</a></li><li data-type='method'><a href="Auth.html#.signInGoogle">signInGoogle</a></li><li data-type='method'><a href="Auth.html#.signInPassword">signInPassword</a></li><li data-type='method'><a href="Auth.html#.signUpPassword">signUpPassword</a></li></ul></li><li><a href="DB.html">DB</a><ul class='methods'><li data-type='method'><a href="DB.html#.arrange_distance">arrange_distance</a></li><li data-type='method'><a href="DB.html#.arrange_distance">arrange_distance</a></li><li data-type='method'><a href="DB.html#.db_add">db_add</a></li><li data-type='method'><a href="DB.html#.db_delete">db_delete</a></li><li data-type='method'><a href="DB.html#.db_set">db_set</a></li><li data-type='method'><a href="DB.html#.db_update">db_update</a></li><li data-type='method'><a href="DB.html#.get_doc_all">get_doc_all</a></li><li data-type='method'><a href="DB.html#.get_doc_data">get_doc_data</a></li><li data-type='method'><a href="DB.html#.get_doc_list">get_doc_list</a></li><li data-type='method'><a href="DB.html#.upload_image">upload_image</a></li></ul></li><li><a href="Hooks.html">Hooks</a><ul class='methods'><li data-type='method'><a href="Hooks.html#.useAuthState">useAuthState</a></li><li data-type='method'><a href="Hooks.html#.useFirestoreQuery">useFirestoreQuery</a></li><li data-type='method'><a href="Hooks.html#.useLocalStorage">useLocalStorage</a></li></ul></li><li><a href="Matching.html">Matching</a><ul class='methods'><li data-type='method'><a href="Matching.html#.matching_add">matching_add</a></li><li data-type='method'><a href="Matching.html#.matching_get_item">matching_get_item</a></li><li data-type='method'><a href="Matching.html#.matching_get_item">matching_get_item</a></li><li data-type='method'><a href="Matching.html#.matching_get_list">matching_get_list</a></li><li data-type='method'><a href="Matching.html#.matching_set">matching_set</a></li></ul></li><li><a href="User.html">User</a><ul class='methods'><li data-type='method'><a href="User.html#.add_food_tag">add_food_tag</a></li><li data-type='method'><a href="User.html#.add_place_tag">add_place_tag</a></li><li data-type='method'><a href="User.html#.calculateDistance">calculateDistance</a></li><li data-type='method'><a href="User.html#.check_password_valid">check_password_valid</a></li><li data-type='method'><a href="User.html#.compare_password">compare_password</a></li><li data-type='method'><a href="User.html#.del_tag">del_tag</a></li><li data-type='method'><a href="User.html#.display_age_range">display_age_range</a></li><li data-type='method'><a href="User.html#.get_avg_user_score">get_avg_user_score</a></li><li data-type='method'><a href="User.html#.get_page_num">get_page_num</a></li><li data-type='method'><a href="User.html#.get_update_location">get_update_location</a></li><li data-type='method'><a href="User.html#.step1_confirm_blank">step1_confirm_blank</a></li><li data-type='method'><a href="User.html#.step2_confirm_blank">step2_confirm_blank</a></li></ul></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">API.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { Timestamp } from "firebase/firestore";
import { white } from "../App";

/**
 * @namespace API
 */

/** 입력 값이 null 일 때 대체값으로 출력하는 함수
 * @function checkNull
 * @memberof API
 * @param {object} a 입력값
 * @param {object} b 입력값이 null이면 출력할 default 값
 * @returns {object} null이 아닌 값 출력
 */
export function checkNull(a, b) {
  return a ? a : b;
}

/** colorScheme 변환
 * @function getSatuation
 * @memberof API
 * @param {string} code "[색상].[명도]" 포맷으로 작성된 코드
 * @returns {string} 색상값만 반환
 */
export function getSatuation(code) {
  if (!code.includes(".")) return white;
  return checkNull(code.split(".")[0], "white");
}
/** colorScheme 변환
 * @function getBrightness
 * @memberof API
 * @param {string} code "[색상].[명도]" 포맷으로 작성된 코드
 * @returns {string} 명도값만 반환
 */
export function getBrightness(code) {
  if (!code.includes(".")) return white;
  return checkNull(parseInt(code.split(".")[1]), 50);
}

/** object에 item 추가 / 변경
 * @function setData
 * @memberof API
 * @param {object} _state 기존 오브젝트
 * @param {string} _key 키
 * @param {string} _value 값
 * @returns {object} key 의 값을 value로 변경 또는 추가한 오브젝트 반환
 */
export function setData(_state, _key, _value) {
  return { ..._state, [_key]: _value };
}

/** 실명 가리기 함수
 * @function getDisplayName
 * @memberof API
 * @param {string} name 기존 실명
 * @returns {string} 실명 맨 끝의 값을 *로 처리(3글자 초과는 2개 지움)
 */
export function getDisplayName(name) {
  if (name === "" || !name) return "";

  if (name.length > 3) return name.slice(0, -2) + "*";
  else return name.slice(0, -1) + "*";
}

/** 실명 가리기 함수
 * @function getDisplayAge
 * @memberof API
 * @param {string} birthdate 생년월일
 * @returns {string} 생년월일을 나이로 변환한 후 5살 범위로 반환
 */
export function getDisplayAge(birthdate) {
  var currentDate = new Date();
  var birthdateObj = new Date(birthdate);
  var age = currentDate.getFullYear() - birthdateObj.getFullYear();

  if (
    currentDate.getMonth() &lt; birthdateObj.getMonth() ||
    (currentDate.getMonth() === birthdateObj.getMonth() &amp;&amp;
      currentDate.getDate() &lt; birthdateObj.getDate())
  ) {
    age--;
  }

  var lowerRange = Math.floor(age / 5) * 5;
  var upperRange = lowerRange + 4;
  return `${lowerRange}~${upperRange}세`;
}

/** 실명 가리기 함수
 * @function deg2rad
 * @memberof API
 * @param {number} deg 생년월일
 * @returns {number} deg를 rad로 변환
 */
export function deg2rad(deg) {
  return deg * (Math.PI / 180);
}

/** 숫자를 통화 단위로 반환
 * @function formatCurrency
 * @memberof API
 * @param {number} deg 숫자
 * @param {number} currencyCode 통화 단위
 * @returns {string} 통화 단위 별 구분자가 찍힌 포맷으로 출력
 */
export function formatCurrency(number, currencyCode = "KRW") {
  const formattedNumber = new Intl.NumberFormat("ko-KR", {
    style: "currency",
    currency: currencyCode,
  }).format(number);

  return formattedNumber;
}

/** Firestore Timestamp를 JavaScript Date 객체로 변환하는 함수
 * @function convertFirestoreTimestampToDate
 * @memberof API
 * @param {Timestamp} timestamp timestamp
 * @returns {Date} 날짜로 변환
 */
export function convertFirestoreTimestampToDate(timestamp) {
  if (!timestamp) return new Date();
  const milliseconds =
    timestamp.seconds * 1000 + Math.floor(timestamp.nanoseconds / 1e6);
  return new Date(milliseconds);
}

/** 현재 시간을 가져오는 함수
 * @function getCurrentTime
 * @memberof API
 * @returns {Date} 현재 시간 반환
 */
export function getCurrentTime() {
  return new Date();
}

/** Firestore Timestamp를 현재 시간과 비교하는 함수
 * @function compareTimestampWithCurrentTime
 * @memberof API
 * @param {Timestamp} firestoreTimestamp 타임스탬프
 * @returns {string} 현재 시간과 비교하여 시간차를 출력
 */
export function compareTimestampWithCurrentTime(firestoreTimestamp) {
  const firestoreDate = convertFirestoreTimestampToDate(firestoreTimestamp);
  const currentDate = getCurrentTime();

  // 두 날짜의 차이 계산 (밀리초 단위)
  const timeDifference = currentDate - firestoreDate;

  // 차이를 표시하는 문자열 생성
  if (timeDifference &lt; 60 * 1000) {
    return `${Math.round(timeDifference / 1000)}초 전`;
  } else if (timeDifference &lt; 60 * 60 * 1000) {
    return `${Math.round(timeDifference / (60 * 1000))}분 전`;
  } else if (timeDifference &lt; 24 * 60 * 60 * 1000) {
    return `${Math.round(timeDifference / (60 * 60 * 1000))}시간 전`;
  } else {
    // 다양한 형식으로 날짜 표시 가능
    const options = { year: "numeric", month: "long", day: "numeric" };
    return firestoreDate.toLocaleDateString("ko-Kr", options);
  }
}

/** 생년월일 8자리를 입력받아 성인 여부를 판단하는 함수를 작성. 일반적으로 만 19세 이상의 사람을 성인으로 간주합니다.
 * @function isAdult
 * @memberof API
 * @param {string} birthdate 생년월일
 * @returns {boolean} 만 19세 이상의 사람을 성인으로 간주합니다.
 */
export function isAdult(birthdate) {
  // birthdate는 "YYYYMMDD" 형식의 문자열이라고 가정
  const year = parseInt(birthdate.substr(0, 4), 10);

  // 현재 날짜 구하기
  const currentDate = new Date();
  const currentYear = currentDate.getFullYear();

  // 만 나이 계산 (한국 나이)
  const age = currentYear - year;

  // 만 19세 이상이면 성인으로 판단
  return age >= 19;
}

export function addToDesktop() {
  var userAgent = navigator.userAgent;

  // if ("nclk" in window) {
  //   // 네이버 addshortcut API 호출
  //   nclk("addshortcut", "https://www.naver.com", "네이버");
  //   console.log("네이버 바로가기가 추가되었습니다.");
  // } else {
  //   console.error("네이버 addshortcut API를 지원하지 않습니다.");
  // }

  if (userAgent.indexOf("Chrome") !== -1) {
    return "현재 브라우저는 Chrome입니다.";
  } else if (userAgent.indexOf("Firefox") !== -1) {
    return "현재 브라우저는 Firefox입니다.";
  } else if (userAgent.indexOf("Safari") !== -1) {
    return "현재 브라우저는 Safari입니다.";
  } else if (
    userAgent.indexOf("MSIE") !== -1 ||
    userAgent.indexOf("Trident") !== -1
  ) {
    return "현재 브라우저는 Internet Explorer입니다.";
  } else if (userAgent.indexOf("Edge") !== -1) {
    return "현재 브라우저는 Microsoft Edge입니다.";
  } else {
    return "브라우저를 확인할 수 없습니다.";
  }
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Sat Jan 27 2024 11:45:31 GMT+0900 (GMT+09:00) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
